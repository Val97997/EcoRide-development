{% extends "base.html.twig" %}

{% block title %}
  Review your voyage
{% endblock title %}

{% block body %}

  {{form_start(reviewForm, { 'attr': {"class" : 'form-review w-80 text-center mt-5 bg-dark p-5'} })}}
    <h1 class=" w-100 text-center fw-bolder text-secondary">Rate your experience</h1>
    {{form_row(reviewForm.created_at, { 'attr' : {'class': 'hidden'} })}}
    <!-- Star rating interface -->
    <div class="w-100 p-0">
    <span class="star-rating d-block">
        <i class="bi bi-star fs-1 star" data-value= 1></i>
        <i class="bi bi-star fs-1 star" data-value= 2></i>
        <i class="bi bi-star fs-1 star" data-value= 3></i>
        <i class="bi bi-star fs-1 star" data-value= 4></i>
        <i class="bi bi-star fs-1 star" data-value= 5></i>
    </span>
    </div>

  {{form_end(reviewForm)}}


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('review_rating');

    // Add click event to each star
    stars.forEach(star => {
        star.addEventListener('click', function() {
            let value = this.getAttribute('data-value');
            ratingInput.value = value;

            // Update star colors
            updateStars(value);
        });
    });

    // Add hover effects
    stars.forEach(star => {
        star.addEventListener('mouseover', function() {
            let value = this.getAttribute('data-value');
            highlightStars(value);
        });
    });

    // Function to update star colors based on value
    function updateStars(value) {
        stars.forEach(star => {
            let starValue = star.getAttribute('data-value');

            if (starValue <= value) {
                star.classList.add('active');
            } else {
                star.classList.remove('active');
            }
        });
    }

    // Function to highlight stars on hover
    function highlightStars(value) {
        stars.forEach(star => {
            let starValue = star.getAttribute('data-value');

            if (value >= starValue) {
                star.classList.add('active');
            } else {
                star.classList.remove('active');
            }
        });
    }
});

</script>

{% endblock body %}